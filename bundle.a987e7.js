!function(e){function t(t){for(var n,o,a=t[0],i=t[1],s=0,l=[];s<a.length;s++)o=a[s],r[o]&&l.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(c&&c(t);l.length;)l.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,o){n=r[e]=[t,o]});t.push(n[2]=a);var i,s=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(e){return o.p+""+e+".bundle."+{1:"d762c8",2:"3c23f6"}[e]+".js"}(e),i=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+o+": "+a+")");i.type=o,i.request=a,n[1](i)}r[e]=void 0}};var l=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,s.appendChild(c)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var c=i;o(o.s=7)}([function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});const r="temme-playground-html",o="temme-playground-selector-string",a=new URL(document.URL).searchParams.get("example"),i=null!==a},function(e,t){e.exports=Temme},function(e,t,n){(function(t){var n="Expected a function",r=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,d=u||m||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,g=function(){return d.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==o}(e))return r;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):i.test(e)?r:+e}e.exports=function(e,t,r){var o,a,i,s,c,l,u=0,m=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function y(t){var n=o,r=a;return o=a=void 0,u=t,s=e.apply(r,n)}function $(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=i}function S(){var e=g();if($(e))return w(e);c=setTimeout(S,function(e){var n=t-(e-l);return d?h(n,i-(e-u)):n}(e))}function w(e){return c=void 0,p&&o?y(e):(o=a=void 0,s)}function x(){var e=g(),n=$(e);if(o=arguments,a=this,l=e,n){if(void 0===c)return function(e){return u=e,c=setTimeout(S,t),m?y(e):s}(l);if(d)return c=setTimeout(S,t),y(l)}return void 0===c&&(c=setTimeout(S,t)),s}return t=b(t)||0,v(r)&&(m=!!r.leading,i=(d="maxWait"in r)?f(b(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),x.cancel=function(){void 0!==c&&clearTimeout(c),u=0,o=l=a=c=void 0},x.flush=function(){return void 0===c?s:w(g())},x}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var r=n(4),o=n.n(r),a=n(0);function i(e,t){return o.a.compressToEncodedURIComponent(JSON.stringify({html:e,selectorString:t}))}function s(e,t){a.a||location.replace("#"+i(e,t))}function c(){try{const e=location.hash.slice(1);return JSON.parse(o.a.decompressFromEncodedURIComponent(e))}catch(e){return null}}},function(e,t){e.exports=LZString},function(e,t,n){"use strict";const r='<a href="https://github.com/shinima/temme">Star Me on <span>GitHub</span></a>',o='\n<ul>\n  <li data-fruit-id="1">\n    <span data-color="red">apple</span>\n  </li>\n  <li data-fruit-id="2">\n    <span data-color="white">pear</span>\n  </li>\n  <li data-fruit-id="3">\n    <span data-color="purple">grape</span>\n  </li>\n</ul>',a='\n<div class="audience-score">观众评分：<span class="n">20</span></div>\n<div class="audience-count">观众数量：<span class="n">2000</span></div>\n<div class="judge-score">评委评分：<span class="n">24</span></div>\n<div class="judge-count">评委数量：<span class="n">8</span></div>\n',i=[{name:"basic-value-capture",html:r,selector:"a[href=$href]{$txt};"},{name:"basic-default-value-capture",html:r,selector:"a[href=$];"},{name:"basic-array-capture",html:o,selector:"li@fruits {\n  span[data-color=$color]{$name};\n}"},{name:"basic-parent-reference",html:o,selector:"li@ {\n  &[data-fruit-id=$fid];\n  span[data-color=$color]{$name};\n}"},{name:"basic-procedures",html:r,selector:"\na{ $text }; // text-capture\na{ $hasAnchor = true }; // conditional-assignment\na{ html($html) }; // procedure html\na{ find('Star Me on ', $website) }; // procedure find"},{name:"modifier-array",html:a,selector:"\n.audience-score .n{ $scores!array };\n.judge-score .n{ $scores!array };\n"},{name:"modifier-candidate",html:'\n<div class="option-1"></div>\n<div class="option-2">value-2</div>\n<div class="option-3">value-3</div>\n',selector:"\n// 下面选择器对应于以下 JavaScript 代码\n// The selectors below correspond to the following JavaScript code\n\n// result.v = $('option-1').text() || $('option-2').text() || $('option-3').text()\n\n.option-1{ $v!candidate };\n.option-2{ $v!candidate };\n.option-3{ $v!candidate };"},{name:"modifier-spread",htmlUrl:"resources/tmall-reviews.html",selector:"\n// procedure spread 示例，注意下面 notUse 和 useSpread 对应的结果的差别\n// spread 一般用在数组捕获中，且往往与 pack/first/last 等过滤器一起使用\n\n.rate-grid tr@notUse|first{\n  .rate-user-info{$user};\n  .rate-user-grade{$userGrade};\n  .tm-rate-append@append|pack {\n    .tm-rate-title{$Title}; // 结果存放在result.append.Title 字段\n    .tm-rate-fulltxt{$Text|trim};\n  };\n}\n\n.rate-grid tr@useSpread|first{\n  .rate-user-info{$user};\n  .rate-user-grade{$userGrade};\n  .tm-rate-append@append|pack!spread {\n    .tm-rate-title{$Title}; // 结果存放在result.appendTitle 字段\n    .tm-rate-fulltxt{$Text|trim};\n  };\n}\n\n.rate-grid tr@useSpread2|first{\n  .rate-user-info{$user};\n  .rate-user-grade{$userGrade};\n  // spread 也接受一个参数，用来指定前缀\n  .tm-rate-append@append|pack!spread('custom') {\n    .tm-rate-title{$Title}; // 结果存放在result.customTitle 字段\n    .tm-rate-fulltxt{$Text|trim};\n  };\n}"},{name:"modifier-reverse",html:a,selector:"\n// 一个能将字段名倒过来的，但并没有什么实际用处的 modifier\nmodifier reverse(result, key, value) {\n  result.set(key.split('').reverse().join(''), value)\n}\n\n.audience-count .n{ $abc!reverse };\n.judge-count .n{ $xyz!reverse };\n"},{name:"so-question-detail",htmlUrl:"resources/stackoverflow-question.html",selector:"\n// https://stackoverflow.com/questions/291978/short-description-of-the-scoping-rules\n// Capture detail of the question\nfilter format() {\n  return this.replace(/\\s+/g, ' ')\n}\n\n#question-header a[href=$link]{$title};\n\n.question .vote-count-post{$upvoteCount|Number};\n.question .post-text{ html($postText|trim|format) };\n.question .post-tag@tagList{ &{$} };\n.question .post-signature:last-child .user-details a{$askedBy|format};\n\n.answer@answers {\n  &[data-answerid=$answerid];\n  $accepted = false;\n  &.accepted-answer{$accepted = true};\n  .vote-count-post{$upvoteCount|Number};\n\n  .post-text{ html($postText|trim|format) };\n  .post-signature:last-child .user-details a{$answeredBy|format};\n  .user-action-time{$action|trim|format}\n\n  .comment@comments{\n    .comment-user{$commentedBy|format};\n    .comment-copy{$text};\n  }\n}"},{name:"github-commits",htmlUrl:"resources/github-commits.html",selector:'\n// https://github.com/shinima/temme/commits/v0.3.0\n// Extract commits information from GitHub commits page\n.commits-listing .commit@ {\n  relative-time[datetime=$time];\n  .commit-author{$author};\n  .commit-title >a[title=$message];\n  .commit-links-group>a[href=$commitLink]{$shortHash|trim};\n  a[aria-label^="Browse the repository" href=$treeLink];\n}'},{name:"github-issues",htmlUrl:"resources/github-issues.html",selector:"\n// https://github.com/facebook/react/issues?q=\n// Extract issue information from GitHub issues page\n\nfilter url() {\n  const baseUrl = 'https://github.com/facebook/react/issues?q='\n  return new URL(this, baseUrl).href\n}\n\n.js-issue-row@{\n  &[id=$issueId|slice(6)|Number];\n\n  .float-left.pt-2.pl-3>span[aria-label=$type];\n  .float-left.col-9.p-2>a[href=$link|url]{$title|trim};\n  relative-time[datetime=$time];\n\n  $assignee = null;\n  .float-left a.avatar[aria-label=$assignee];\n\n  $commentCount = 0;\n  .float-right.col-5 a span{$commentCount|Number};\n}"},{name:"douban-movie-summary-Chinese",htmlUrl:"resources/douban-movie-summary.html",selector:'// 豆瓣电影介绍页面数据抓取\n// https://movie.douban.com/subject/26930504/\n\n// 电影的名称\n[property="v:itemreviewed"]{$title};\n// 电影上映年份\n.year{$year|substring(1, 5)|Number};\n// 电影导演\n[rel="v:directedBy"]@directedBy { &{$} };\n// 电影编剧\n:contains(\'编剧\') + span{$storyFrom|split(\'/\')||trim};\n// 电影主演(前三位)\n[rel="v:starring"]@starring|slice(0, 3){&{$}}\n\n// 平均评分\n[property="v:average"]{$avgRating|Number};\n// 具体的评分情况\n.ratings-on-weight .item@ratingInfo{\n  span[title=$title];\n  .rating_per{$percentage};\n};\n\n// 电影剧情简介\n[property="v:summary"]{$summary|trim};\n\n// 喜欢这部电影的人也喜欢\n.recommendations-bd dl@recommendations{\n  img[alt=$name src=$imgUrl];\n  a[href=$url];\n};'},{name:"tmall-reviews-Chinese",htmlUrl:"resources/tmall-reviews.html",selector:"\n// 天猫商品评价数据抓取\n// 评论数据来自于 https://detail.tmall.com/item.htm?id=549049522944&skuId=3499764035487\nfilter url() {\n  const base = 'https://detail.tmall.com/item.htm'\n  return new URL(this, base).href\n}\n\n@reviewDetail = {\n  .tm-rate-title{$title};\n  .tm-rate-fulltxt{$text|trim};\n  .tm-m-photos ul>li@imgs{\n    &[data-src=$|url];\n  };\n};\n\n.rate-grid tr@{\n  .rate-user-info{$user};\n  .rate-user-grade{$userGrade};\n  .col-meta .rate-sku p@meta{ &[title=$]; };\n  .tm-col-master >.tm-rate-content@premiere|pack { @reviewDetail; };\n  .tm-rate-premiere@premiere|pack { @reviewDetail; };\n  .tm-rate-append@append|pack { @reviewDetail; };\n}"}];t.a=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(5),i=n(1),s=n.n(i),c=n(0),l=n(3);function u(e,t){c.a||(e?localStorage.setItem(c.c,e):localStorage.removeItem(c.c),t?localStorage.setItem(c.d,t):localStorage.removeItem(c.d))}const m=o()(u,300),d=document.querySelector("#version"),p=document.querySelector("#browse-example-link"),f=document.querySelector("#html-input"),h=document.querySelector("#selector-input"),g=document.querySelector("#output"),v=document.querySelector("#result-time-hint"),b=document.querySelector("#error-indicator"),y=document.querySelector("#copy-result-button"),$=document.querySelector("#html-part"),S=document.querySelector("#selector-output-part"),w=document.querySelector("#toggle-width-button"),x=document.querySelector("#format-html"),T=Object(l.b)()||{html:localStorage.getItem(c.c)||"",selectorString:localStorage.getItem(c.d)||""};const k=new Set;const j={show(e){const t=N.getSession();if("SyntaxError"===e.name&&e.location){const n=e.location.start.line-1;k.add(n),t.addGutterDecoration(n,"ace_error")}b.textContent=e.message},hide(){b.textContent=""}};let q=null;const C={green:"#28a745",red:"#dc3545"},O={setText(e,t="green"){v.style.color=C[t],v.textContent=e,O._schedule(1500)},setTime(e){v.style.color=C.green,v.textContent=`${e.toFixed(3)}ms`,O._schedule(3e3)},clear(){v.textContent=""},_schedule(e){clearTimeout(q),q=setTimeout(()=>O.clear(),e)}};function U(e){let t=null;return function(n){return null!==n&&(t=e(n)),t}}const E=U(i.temmeParser.parse),I=U(i.cheerio.load);d.textContent=i.version,p.href=`?example=${a.a[0].name}`;const L=function(){const e=ace.edit(f),t=e.getSession();return e.setTheme("ace/theme/textmate"),t.setMode("ace/mode/html"),t.setUseSoftTabs(!0),t.setTabSize(2),e.$blockScrolling=1/0,!c.a&&T&&(e.setValue(T.html),e.getSession().selection.moveCursorFileStart()),e}(),N=function(){const e=ace.edit(h),t=e.getSession();return e.setTheme("ace/theme/chrome"),t.setMode("ace/mode/temme"),t.setUseSoftTabs(!0),t.setTabSize(2),e.$blockScrolling=1/0,!c.a&&T&&(e.setValue(T.selectorString),e.getSession().selection.moveCursorFileStart()),e}(),_=function(){const e=ace.edit(g),t=e.getSession();return e.setTheme("ace/theme/chrome"),t.setMode("ace/mode/json"),t.setUseSoftTabs(!0),t.setTabSize(2),e.setReadOnly(!0),e.$blockScrolling=1/0,e}(),M=o()(function(e,t,n){if(function(){const e=N.getSession();for(const t of k)e.removeGutterDecoration(t,"ace_error");k.clear()}(),t)try{const r=E(t),{time:o,result:a}=function(e){const t=performance.now(),n=e();return{time:performance.now()-t,result:n}}(()=>{const t=I(e);return s()(t,r)});n.setValue(JSON.stringify(a,null,2)),n.getSession().selection.moveCursorFileStart(),O.setTime(o),j.hide()}catch(e){j.show(e),O.clear()}else j.hide(),O.clear()},300),P=()=>{const e=L.getValue(),t=N.getValue();Object(l.c)(e,t),M(e,t,_),m(e,t)};L.getSession().on("change",P),N.getSession().on("change",P),y.onclick=(()=>{_.focus(),_.getSelection().selectAll();try{document.execCommand("copy")&&O.setText("copied!")}catch(e){O.setText("copy failed.","red")}}),w.addEventListener("click",function(){"50%"===$.style.width?($.style.width="15%",S.style.width="85%",w.textContent=">"):($.style.width="50%",S.style.width="50%",w.textContent="<")}),x.addEventListener("click",function(){const e=L.getValue();n.e(1).then(n.t.bind(null,18,7)).then(({default:t})=>{const n=t(e,{ocd:!0});n!==e&&L.setValue(n)})}),window.addEventListener("beforeunload",()=>{u(L.getValue(),N.getValue())}),P(),c.a&&n.e(2).then(n.bind(null,19)).then(({default:e})=>{e(c.b,L,N)})}]);